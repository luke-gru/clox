var i = 0;
for (var j = 0; j < 4; j += 1) {
  GC.collect();
}
var bytesBefore = GC.stats()['bytes'];
/*print bytesBefore;*/
while (i < 500) {
  "FREE ME";
  [1, 2, 3];
  %{1:2};
  Object();
  i = i + 1;
}
print "collecting GC";
for (var j = 0; j < 4; j += 1) {
  GC.collect();
}
var bytesAfter = GC.stats()['bytes'];
/*print bytesAfter;*/
// FIXME: find out why we leak 38 bytes...
print (bytesAfter-40) <= bytesBefore;

__END__
-- expect: --
collecting GC
true
